import{a as I,Q as S}from"./QCard.c1963adf.js";import{_ as v,l as w,r as i,y as u,E as p,C as c,m as x,z as C,A as o,d as a,G as l,I as r,B as E,aA as P,aB as R}from"./index.3e935c67.js";import{i as A,Q as d,j as b}from"./QForm.10eac8bb.js";import{Q as y}from"./QPage.c2db014c.js";import{E as L,P as Q,A as V}from"./auth.api.d64c06a4.js";import{u as B}from"./user-store.6c823f76.js";import{u as N}from"./profile-store-api.042537c7.js";import"./focus-manager.bc8f5bcf.js";import"./axios.ae2e2349.js";import"./store-state.enum.0423141e.js";const q=w({name:"SignInPage",components:{EmailInput:L,PasswordInput:Q},setup(){const e=i(),s=i(),t=N(),n=B();return{emailInputRef:e,passwordInputRef:s,profileStore:t,userStore:n,getEmailInputRefInstance:()=>e.value,getPasswordInputRefInstance:()=>s.value}},methods:{validateForm(e,s){let t=!0;return e.isValid()||(e.showError(),t=!1),s.isValid()||(s.showError(),t=!1),t},navigateToApplication(){var t,n;const s=(n=(t=this.$router.currentRoute.value.query.prev)==null?void 0:t.toString())!=null?n:"/";this.$router.push(s)},async submitLogin(e){e.preventDefault();const s=this.getEmailInputRefInstance(),t=this.getPasswordInputRefInstance();!s||!t||!this.validateForm(s,t)||V.login({email:s.getValue(),password:t.getValue()})},handleLoginSuccess(e){this.navigateToApplication()}},mounted(){u.on(p.LOGIN_SUCCESS,this.handleLoginSuccess)},unmounted(){u.off(p.LOGIN_SUCCESS,this.handleLoginSuccess)}}),m=e=>(P("data-v-657bf912"),e=e(),R(),e),$=m(()=>r("div",{class:"text-h6 text-center"},"Login",-1)),T={class:"text-h7 text-center"},O=m(()=>r("div",{class:"text-h7 text-center"},"OR",-1));function U(e,s,t,n,f,_){const h=c("email-input"),g=c("password-input");return x(),C(y,{class:"window-height"},{default:o(()=>[a(b,{class:"window-height container",onSubmit:e.submitLogin},{default:o(()=>[a(I,{class:"auth-card"},{default:o(()=>[a(S,{class:"q-px-md"},{default:o(()=>[$,a(h,{ref:"emailInputRef"},null,512),a(g,{ref:"passwordInputRef"},null,512)]),_:1}),a(A,{align:"right",class:"q-px-md q-mb-md"},{default:o(()=>[a(l,{type:"submit",label:"Login",color:"primary"})]),_:1}),r("div",T,[E(" Already have an account? "),a(l,{to:"/signup",label:"Sign Up",flat:"",unelevated:"",rounded:"",dense:"",color:"purple"})]),a(d,{inset:"",spaced:"",size:"3px"}),O,a(d,{inset:"",spaced:"",size:"3px"})]),_:1})]),_:1},8,["onSubmit"])]),_:1})}var W=v(q,[["render",U],["__scopeId","data-v-657bf912"]]);export{W as default};
