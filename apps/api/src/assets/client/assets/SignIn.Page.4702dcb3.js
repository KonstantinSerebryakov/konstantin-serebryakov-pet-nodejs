import{b as I,Q as S,k as v,a as i,l as w}from"./QForm.b242c720.js";import{_ as x,t as C,r as u,u as c,E as p,A as d,v as E,x as P,y as o,d as a,C as l,D as r,z as R,ax as y,ay as A}from"./index.a468aedf.js";import{Q as L}from"./QPage.6a27666a.js";import{E as b,P as Q,A as V}from"./auth.api.4079faad.js";import{u as N}from"./user-store.825968a2.js";import{u as q}from"./profile-store.b6fe1705.js";import"./focus-manager.dc98bfd3.js";import"./axios.b55e1699.js";const $=C({name:"SignInPage",components:{EmailInput:b,PasswordInput:Q},setup(){const e=u(),s=u(),t=q(),n=N();return{emailInputRef:e,passwordInputRef:s,profileStore:t,userStore:n,getEmailInputRefInstance:()=>e.value,getPasswordInputRefInstance:()=>s.value}},methods:{validateForm(e,s){let t=!0;return e.isValid()||(e.showError(),t=!1),s.isValid()||(s.showError(),t=!1),t},navigateToApplication(){var t,n;const s=(n=(t=this.$router.currentRoute.value.query.prev)==null?void 0:t.toString())!=null?n:"/";this.$router.push(s)},async submitLogin(e){e.preventDefault();const s=this.getEmailInputRefInstance(),t=this.getPasswordInputRefInstance();!s||!t||!this.validateForm(s,t)||V.login({email:s.getValue(),password:t.getValue()})},handleLoginSuccess(e){this.navigateToApplication()}},mounted(){c.on(p.LOGIN_SUCCESS,this.handleLoginSuccess)},unmounted(){c.off(p.LOGIN_SUCCESS,this.handleLoginSuccess)}}),m=e=>(y("data-v-47e7afda"),e=e(),A(),e),B=m(()=>r("div",{class:"text-h6 text-center"},"Login",-1)),T={class:"text-h7 text-center"},O=m(()=>r("div",{class:"text-h7 text-center"},"OR",-1));function U(e,s,t,n,f,_){const h=d("email-input"),g=d("password-input");return E(),P(L,{class:"window-height"},{default:o(()=>[a(w,{class:"window-height container",onSubmit:e.submitLogin},{default:o(()=>[a(I,{class:"auth-card"},{default:o(()=>[a(S,{class:"q-px-md"},{default:o(()=>[B,a(h,{ref:"emailInputRef"},null,512),a(g,{ref:"passwordInputRef"},null,512)]),_:1}),a(v,{align:"right",class:"q-px-md q-mb-md"},{default:o(()=>[a(l,{type:"submit",label:"Login",color:"primary"})]),_:1}),r("div",T,[R(" Already have an account? "),a(l,{to:"/signup",label:"Sign Up",flat:"",unelevated:"",rounded:"",dense:"",color:"purple"})]),a(i,{inset:"",spaced:"",size:"3px"}),O,a(i,{inset:"",spaced:"",size:"3px"})]),_:1})]),_:1},8,["onSubmit"])]),_:1})}var K=x($,[["render",U],["__scopeId","data-v-47e7afda"]]);export{K as default};
